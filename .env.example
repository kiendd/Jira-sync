# ==============================================================================
# Jira Sync Global Environment Configuration
# ==============================================================================
# File này chứa biến môi trường chung cho tất cả workers.
# Copy thành .env và chỉnh sửa các giá trị theo nhu cầu.
#
# Lưu ý: KHÔNG commit file .env vào git (đã có trong .gitignore)
# ==============================================================================

# ==============================================================================
# Cấu hình chung (áp dụng cho tất cả workers)
# ==============================================================================

# Log level: debug, info, warn, error
LOG_LEVEL=info

# Port cho health check server
PORT=3000

# ==============================================================================
# Cấu hình Database (MongoDB)
# ==============================================================================

# MongoDB connection URL (tất cả workers dùng chung instance này)
DATABASE_URL=mongodb://mongo:27017

# Lưu ý: Database name cho mỗi worker được tự động sinh từ worker name.
# Ví dụ: worker "sync-ab" sử dụng database "sync_ab"
# KHÔNG cần cấu hình DATABASE_NAME

# ==============================================================================
# Cấu hình Workers
# ==============================================================================
# Mỗi worker sẽ đọc config từ file trong thư mục config/
# Ví dụ: config/sync-ab.json, config/sync-cd.json
#
# Mỗi config file cần có:
#   - name: tên worker (ví dụ: "sync-ab")
#   - jira: cấu hình Jira (baseUrl, email, apiToken, authType)
#   - userProjectKey: project key của User project
#   - devProjectKey: project key của Dev project
#   - syncIntervalMinutes: khoảng cách sync (phút)
#   - rules: mảng các sync rules
#
# Worker sẽ tự động sử dụng database với tên: <name>_sync
# Ví dụ: worker "sync-ab" sẽ dùng database "sync_ab"

# ==============================================================================
# Hướng dẫn thêm Worker mới
# ==============================================================================
# 1. Tạo file config mới:
#    cp config/sync-rules.example.json config/sync-xy.json
#
# 2. Chỉnh sửa config file:
#    - Đặt "name": "sync-xy"
#    - Thêm "jira" với cấu hình Jira của bạn
#    - Đặt "userProjectKey": "USER-X"
#    - Đặt "devProjectKey": "DEV-Y"
#    - Đặt "syncIntervalMinutes": 5
#    - Chỉnh sửa rules theo nhu cầu
#
# 3. Restart container:
#    docker-compose -f docker-compose.consolidated.yml restart jira-sync
#
# 4. Kiểm tra health:
#    curl http://localhost:3000/health

# ==============================================================================
# Cấu hình Docker Secrets (Production)
# ==============================================================================
# Cho production, nên sử dụng Docker Secrets:
#   - Tạo secret: echo "token" | docker secret create jira_api_token -
#   - Sử dụng trong docker-compose:
#     secrets:
#       - jira_api_token
#     environment:
#       - JIRA_API_TOKEN_FILE=/run/secrets/jira_api_token
