# ==============================================================================
# Jira Sync Multi-Instance Environment Configuration
# ==============================================================================
# File này chứa biến môi trường cho multi-instance deployment.
# Copy thành .env.multi và chỉnh sửa các giá trị theo nhu cầu.
#
# Cách sử dụng:
#   1. cp .env.multi.example .env.multi
#   2. nano .env.multi
#   3. Chỉnh sửa các giá trị bên dưới
#   4. Chạy: docker-compose -f docker-compose.multi.yml up -d
#
# Lưu ý: KHÔNG commit file .env.multi vào git (đã có trong .gitignore)
# ==============================================================================

# ==============================================================================
# Cấu hình chung (áp dụng cho tất cả instances)
# ==============================================================================

# Jira authentication type: "basic" hoặc "pat"
JIRA_AUTH_TYPE=pat

# Khoảng cách giữa các lần sync (phút)
SYNC_INTERVAL_MINUTES=5

# Log level: debug, info, warn, error
LOG_LEVEL=info

# ==============================================================================
# Instance 1: Project A <-> Project B (sync-ab)
# ==============================================================================
# Cấu hình cho cặp project đầu tiên
# Ví dụ: USER-A (project vận hành) ↔ DEV-A (project development)

# Jira URL cho instance AB
JIRA_BASE_URL_AB=https://company-a.atlassian.net

# Email cho Jira authentication (chỉ cần khi JIRA_AUTH_TYPE=basic)
JIRA_EMAIL_AB=bot-a@company.com

# API Token hoặc Personal Access Token
JIRA_API_TOKEN_AB=your-jira-api-token-here

# Project keys cho instance AB
USER_PROJECT_KEY_A=USER-A
DEV_PROJECT_KEY_A=DEV-A

# Database name cho MongoDB (mỗi instance có database riêng)
DATABASE_NAME_A=sync_ab

# ==============================================================================
# Instance 2: Project C <-> Project D (sync-cd)
# ==============================================================================
# Cấu hình cho cặp project thứ hai
# Ví dụ: USER-B (project vận hành khác) ↔ DEV-B (project development khác)

# Jira URL cho instance CD
JIRA_BASE_URL_CD=https://company-b.atlassian.net

# Email cho Jira authentication (chỉ cần khi JIRA_AUTH_TYPE=basic)
JIRA_EMAIL_CD=bot-b@company.com

# API Token hoặc Personal Access Token
JIRA_API_TOKEN_CD=your-other-jira-api-token-here

# Project keys cho instance CD
USER_PROJECT_KEY_C=USER-C
DEV_PROJECT_KEY_C=DEV-C

# Database name cho MongoDB
DATABASE_NAME_C=sync_cd

# ==============================================================================
# Instance 3: Project X <-> Project Y (sync-xy) - Tùy chọn
# ==============================================================================
# Để thêm instance mới, uncomment và chỉnh sửa các dòng dưới đây:
# Sau đó thêm service block tương ứng vào docker-compose.multi.yml

# Jira URL cho instance XY
# JIRA_BASE_URL_XY=https://company-c.atlassian.net
# JIRA_EMAIL_XY=bot-c@company.com
# JIRA_API_TOKEN_XY=your-third-jira-api-token
# USER_PROJECT_KEY_XY=USER-X
# DEV_PROJECT_KEY_XY=DEV-X
# DATABASE_NAME_XY=sync_xy

# ==============================================================================
# Cách thêm Instance mới
# ==============================================================================
# 1. Thêm các biến env var với suffix mới (ví dụ: _XY)
# 2. Thêm service block vào docker-compose.multi.yml
# 3. Tạo file config mới trong config/
# 4. Restart: docker-compose -f docker-compose.multi.yml up -d
#
# Ví dụ thêm instance XY:
#   - Copy JIRA_BASE_URL_CD thành JIRA_BASE_URL_XY
#   - Copy JIRA_API_TOKEN_CD thành JIRA_API_TOKEN_XY
#   - Copy USER_PROJECT_KEY_C thành USER_PROJECT_KEY_XY
#   - Copy DEV_PROJECT_KEY_C thành DEV_PROJECT_KEY_XY
#   - Copy DATABASE_NAME_C thành DATABASE_NAME_XY

# ==============================================================================
# Hướng dẫn lấy Jira API Token
# ==============================================================================
# 1. Đăng nhập vào https://id.atlassian.com/manage-profile/security/api-tokens
# 2. Nhấn "Create API token"
# 3. Đặt tên cho token (ví dụ: "Jira Sync - Instance AB")
# 4. Copy token và dán vào JIRA_API_TOKEN_AB
#
# Lưu ý: Bảo mật token này, không chia sẻ công khai!

# ==============================================================================
# Cấu hình Docker Secrets (Production)
# ==============================================================================
# Cho production, nên sử dụng Docker Secrets thay vì plain text:
#   - Tạo secret: echo "token" | docker secret create jira_api_token_ab -
#   - Sử dụng trong docker-compose:
#     secrets:
#       - jira_api_token_ab
#     environment:
#       - JIRA_API_TOKEN_FILE=/run/secrets/jira_api_token_ab
